enum CompanyRole {
    ADMIN
    MEMBER
}

model Company {
    id              String          @id @default(cuid())
    logoUrl         String?
    name            String
    description     Json?
    website         String?
    adminEmployerId String // ID of the employer who created this company
    adminEmployer   Employer        @relation("AdminEmployer", fields: [adminEmployerId], references: [id], onDelete: Cascade)
    members         CompanyMember[] // Relationship through the join table
    invitations     Invitations[]
    isDeleted       Boolean         @default(false)
    createdAt       DateTime        @default(now())
    updatedAt       DateTime        @updatedAt
    deletedAt       DateTime?
    jobPosted       Job[]

    @@map("companies")
}

model CompanyMember {
    id         String      @id @default(cuid())
    employerId String
    companyId  String
    role       CompanyRole @default(MEMBER)
    joinedAt   DateTime    @default(now())
    updatedAt  DateTime    @updatedAt
    deletedAt  DateTime?
    isDeleted  Boolean     @default(false)
    employer   Employer    @relation(fields: [employerId], references: [id], onDelete: Cascade)
    company    Company     @relation(fields: [companyId], references: [id], onDelete: Cascade)

    @@unique([employerId, companyId])
    @@map("company_members")
}
